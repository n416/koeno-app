:root {
  --bg-app: #f8f9fa;
  --bg-panel: #ffffff;
  --border-color: #e2e8f0;
  --primary-color: #0f172a;
  --accent-color: #3b82f6;
  --text-main: #334155;
  --text-sub: #64748b;
  --error-color: #ef4444;
  --warning-color: #f59e0b;
  --success-color: #10b981;
  --header-height: 50px;

  /* カテゴリ別テーマカラー定義 (CareTouch.tsxと一致させる) */
  --color-orange: #f97316;
  --color-green: #10b981;
  --color-blue: #3b82f6;
  --color-indigo: #6366f1; /* 追加 */
  --color-red: #ef4444;
  --color-purple: #a855f7;
  --color-teal: #14b8a6;   /* 追加 */
  --color-gray: #64748b;
  
  /* 時間帯カラー定義 */
  --zone-night: #1e3a8a;
  --zone-morning: #ea580c;
  --zone-afternoon: #ca8a04;
  --zone-midnight: #475569;
}

body {
  margin: 0; padding: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  color: var(--text-main); background-color: var(--bg-app);
}

/* --- テーマカラー適用クラス --- */
.theme-orange { --theme-color: var(--color-orange); }
.theme-green  { --theme-color: var(--color-green); }
.theme-blue   { --theme-color: var(--color-blue); }
.theme-indigo { --theme-color: var(--color-indigo); } /* 追加 */
.theme-red    { --theme-color: var(--color-red); }
.theme-purple { --theme-color: var(--color-purple); }
.theme-teal   { --theme-color: var(--color-teal); }   /* 追加 */
.theme-gray   { --theme-color: var(--color-gray); }

/* --- ゾーンカラー適用クラス --- */
.zone-night     { --zone-color: var(--zone-night); }
.zone-morning   { --zone-color: var(--zone-morning); }
.zone-afternoon { --zone-color: var(--zone-afternoon); }
.zone-midnight  { --zone-color: var(--zone-midnight); }

/* --- rc-dock 修正 --- */
.dock-panel {
  border: 1px solid var(--border-color) !important;
  background: var(--bg-panel);
  min-width: 0 !important; min-height: 0 !important;
}
.dock-bar {
  background: #f1f5f9 !important;
  border-bottom: 1px solid var(--border-color) !important;
  height: 32px !important; padding: 0 !important;
  display: flex !important; align-items: flex-end !important;
}
.dock-tab {
  background: transparent !important; border: none !important;
  margin: 0 2px !important; padding: 0 12px !important; height: 100% !important;
  display: flex !important; align-items: center !important; justify-content: center !important;
  min-width: 60px !important; cursor: pointer !important;
}
.dock-tab > div {
  color: var(--text-sub) !important;
  font-size: 12px !important; font-weight: 500 !important;
}
.dock-tab-active {
  background: var(--bg-panel) !important;
  border-radius: 4px 4px 0 0 !important;
  box-shadow: 0 -1px 2px rgba(0,0,0,0.05) !important; position: relative;
}
.dock-tab-active > div {
  color: var(--accent-color) !important; font-weight: bold !important;
}
.dock-tab-active::before {
  content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px;
  background-color: var(--accent-color); border-radius: 2px 2px 0 0;
}
.dock-ink-bar { display: none !important; }

/* --- アプリ共通 --- */
.app-container { height: 100vh; display: flex; flex-direction: column; }
.app-header {
  height: var(--header-height); background-color: #fff;
  border-bottom: 1px solid var(--border-color); padding: 0 20px;
  display: flex; align-items: center; justify-content: space-between;
}
.app-title { font-weight: bold; color: var(--primary-color); }
.app-version { font-size: 11px; color: #94a3b8; font-weight: normal; margin-left: 8px; }
.header-actions { display: flex; gap: 8px; align-items: center; }
.header-divider { width: 1px; height: 24px; background: #e2e8f0; margin: 0 8px; }

/* ボタン */
.btn-clean {
  padding: 6px 12px; background: #fff;
  border: 1px solid var(--border-color); border-radius: 4px;
  cursor: pointer; font-size: 13px; color: var(--text-main);
  display: inline-flex; align-items: center; justify-content: center;
}
.btn-clean:hover { background: #f1f5f9; }
.btn-primary {
  background: var(--primary-color); color: white; border: none;
  padding: 6px 16px; border-radius: 4px; cursor: pointer; font-size: 13px;
}
.btn-primary:hover { background: #1e293b; }
.btn-primary:disabled { opacity: 0.7; cursor: not-allowed; }
.btn-unassigned { color: var(--error-color); border-color: var(--error-color); }
.btn-unassigned:hover { background: #fef2f2; }

.main-layout-area { flex: 1; position: relative; }

/* --- パネル内部 --- */
.panel-root { height: 100%; display: flex; flex-direction: column; overflow: hidden; background: #fff; }
.panel-content { flex: 1; overflow-y: auto; }
.panel-centered { justify-content: center; background: #f8fafc; }

/* 日付ナビ */
.date-nav-container {
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 12px; height: 100%;
}
.date-display { text-align: center; }
.date-main { font-size: 14px; font-weight: bold; color: #334155; }
.date-sub { font-size: 11px; margin-left: 6px; color: #64748b; }
.nav-arrow-btn {
  height: 24px; width: 28px; padding: 0;
  border: 1px solid var(--border-color); background: #fff;
  border-radius: 4px; cursor: pointer; color: #64748b;
  display: flex; align-items: center; justify-content: center;
}
.nav-arrow-btn:hover { background: #e2e8f0; }

/* 利用者リスト */
.list-item {
  padding: 8px 12px; border-bottom: 1px solid var(--border-color);
  cursor: pointer; transition: background 0.1s;
}
.list-item:hover { background: #f8fafc; }
.list-item.selected { background: #eff6ff; border-left: 3px solid var(--accent-color); }
.user-row { display: flex; align-items: center; gap: 8px; }
.user-status-dot { width: 8px; height: 8px; border-radius: 50%; }
.dot-red { background-color: var(--error-color); }
.dot-orange { background-color: var(--warning-color); }
.dot-green { background-color: var(--success-color); }
.user-name { font-weight: 600; font-size: 13px; }
.user-meta { font-size: 11px; color: var(--text-sub); margin-left: 16px; }
.dashboard-link-area { padding: 12px; border-top: 1px solid #e2e8f0; background: #f8fafc; }
.dashboard-link-btn { width: 100%; text-align: center; color: #64748b; font-weight: bold; border: none; background: transparent; cursor: pointer; }
.dashboard-link-btn:hover { text-decoration: underline; }

/* 履歴カード */
.history-card {
  padding: 8px 10px; border-bottom: 1px solid var(--border-color);
  display: flex; gap: 8px; align-items: stretch;
  /* CSS変数 --theme-color が親要素で定義されることを前提とする */
  border-left: 3px solid var(--theme-color, #ccc);
}
.history-card.editing { background-color: #fff7ed; }

.history-left { flex: 1; min-width: 0; }
.history-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 2px; }
.history-meta-row { display: flex; align-items: center; gap: 6px; }
.history-time { font-size: 11px; font-weight: bold; color: var(--text-sub); }

.tag-badge { 
  display: inline-block; font-size: 10px; padding: 1px 4px; 
  border-radius: 4px; color: #fff; vertical-align: middle;
  background-color: var(--theme-color, #94a3b8);
}
.editing-badge { font-size: 10px; color: #f97316; font-weight: bold; margin-left: 4px; }

.action-btn-group { display: flex; gap: 4px; }
.action-icon-btn {
  padding: 2px; height: 24px; width: 24px;
  display: flex; align-items: center; justify-content: center;
  border: 1px solid transparent; background: transparent; cursor: pointer; color: #64748b;
}
.action-icon-btn:hover { background: #f1f5f9; border-color: #e2e8f0; border-radius: 4px; }
.btn-edit:hover { color: var(--accent-color); }
.btn-delete:hover { color: var(--error-color); }

.history-content { font-size: 13px; font-weight: 600; margin-top: 2px; }
.history-details { font-size: 11px; color: #64748b; margin-top: 2px; }
.history-detail-item { margin-right: 4px; }
.history-condition { margin-left: 4px; color: var(--error-color); }
.history-note { margin-top: 4px; font-size: 11px; background: #f8fafc; padding: 4px; border-radius: 2px; color: #475569; }

/* タイムライン (右側) */
.history-right { 
  width: 40px; position: relative; 
  background: #f1f5f9; border-radius: 4px; overflow: hidden; 
}
.zone-bg { 
  position: absolute; inset: 0; opacity: 0.3; 
  background-color: var(--zone-color, #ccc);
}
.time-dot { 
  position: absolute; width: 8px; height: 8px; 
  border-radius: 50%; border: 1px solid white; 
  box-shadow: 0 1px 2px rgba(0,0,0,0.2);
  top: 50%; transform: translate(-50%, -50%);
  background-color: var(--theme-color, #ccc);
  /* CSS変数 --dot-pos で位置指定 */
  left: var(--dot-pos, 0%);
}

/* 入力フォーム */
.input-header {
  padding: 8px 16px; border-bottom: 1px solid #f1f5f9;
  display: flex; align-items: center; justify-content: space-between;
}
.input-header.editing { background-color: #fff7ed; }
.input-title-area { display: flex; align-items: center; gap: 8px; }
.input-title { font-size: 13px; font-weight: bold; color: #334155; }
.input-title.editing-text { color: #ea580c; }
.cancel-btn { font-size: 10px; padding: 2px 6px; display: flex; align-items: center; gap: 2px; }
.cancel-icon { font-size: 12px; }
.user-badge { font-size: 12px; color: #64748b; background: #f1f5f9; padding: 2px 8px; border-radius: 4px; }
.input-content-area { padding: 20px; }

.loading-text, .empty-text { padding: 20px; color: #999; font-size: 12px; }
/* --- モーダル (簡易版) --- */
.modal-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 9999;
  display: flex; align-items: center; justify-content: center;
}
.modal-content {
  background: #fff; width: 400px; max-width: 90vw; max-height: 80vh;
  border-radius: 8px; display: flex; flex-direction: column;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}
.modal-header {
  padding: 12px 16px; border-bottom: 1px solid #eee;
  display: flex; align-items: center; justify-content: space-between;
  font-weight: bold; color: var(--primary-color);
}
.modal-body { flex: 1; overflow-y: auto; padding: 0; }
.modal-list { list-style: none; padding: 0; margin: 0; }
.modal-list-item {
  padding: 12px 16px; border-bottom: 1px solid #f1f5f9; cursor: pointer;
}
.modal-list-item:hover { background: #f8fafc; }